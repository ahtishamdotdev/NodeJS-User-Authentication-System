# Changelog

<a name="2.6.0"></a>
## 2.6.0 (2024-03-04)

* feat: add TypeScript types

<a name="2.5.1"></a>
## 2.5.1 (2023-01-06)

* fix: avoid passing final callback to pre hook, because calling the callback can mess up hook execution #36 Automattic/mongoose#12836

<a name="2.5.0"></a>
## 2.5.0 (2022-12-01)

* feat: add errorHandler option to `post()` #34

<a name="2.4.0"></a>
## 2.4.0 (2022-06-13)

* feat: add `overwriteResult()` and `skipWrappedFunction()` for more advanced control flow

<a name="2.3.4"></a>
## 2.3.4 (2022-02-10)

* perf: various performance improvements #27 #24 #23 #22 #21 #20

<a name="2.3.3"></a>
## 2.3.3 (2021-12-26)

* fix: handle sync errors in `wrap()`

<a name="2.3.2"></a>
## 2.3.2 (2020-12-08)

* fix: handle sync errors in pre hooks if there are multiple hooks

<a name="2.3.0"></a>
## 2.3.0 (2018-09-24)

* chore(release): 2.2.3 ([c8f2695](https:
* chore(release): 2.2.4 ([a377a4f](https:
* chore(release): 2.2.5 ([5a495e3](https:
* fix(filter): copy async pres correctly with `filter()` ([1b1ed8a](https:
* feat: add filter() function ([1f641f4](https:
* feat: support storing options on pre and post hooks ([59220b9](https:



<a name="2.2.3"></a>
## <small>2.2.3 (2018-09-10)</small>

* chore: release 2.2.3 ([af653a3](https:



<a name="2.2.2"></a>
## <small>2.2.2 (2018-09-10)</small>

* chore: release 2.2.2 ([3f0144d](https:
* fix: allow merge() to not clone ([e628d65](https:



<a name="2.2.1"></a>
## <small>2.2.1 (2018-06-05)</small>

* chore: release 2.2.1 ([4625a64](https:
* chore: remove lockfile from git ([7f3e4e6](https:
* fix: handle numAsync correctly when merging ([fef8e7e](https:
* test: repro issue with not copying numAsync ([952d9db](https:



<a name="2.2.0"></a>
## 2.2.0 (2018-06-05)

* chore: release 2.2.0 ([ff9ad03](https:
* fix: use maps instead of objects for _pres and _posts so `toString()` doesn't get reported as having ([55df303](https:



<a name="2.1.0"></a>
## 2.1.0 (2018-05-16)

* chore: release 2.1.0 ([ba5f1bc](https:
* feat: add option to check wrapped function return value for promises ([c9d7dd1](https:
* refactor: use const in wrap() ([0fc21f9](https:



<a name="2.0.7"></a>
## <small>2.0.7 (2018-04-28)</small>

* chore: release 2.0.7 ([0bf91e6](https:
* feat: add `hasHooks()` ([225f18d](https:



<a name="2.0.6"></a>
## <small>2.0.6 (2018-03-22)</small>

* chore: release 2.0.6 ([f3d406b](https:
* fix(wrap): ensure fast path still wraps function in `nextTick()` for chaining ([7000494](https:



<a name="2.0.5"></a>
## <small>2.0.5 (2018-02-22)</small>

* chore: release 2.0.5 ([3286612](https:
* perf(createWrapper): don't create wrapper if there are no hooks ([5afc5b9](https:



<a name="2.0.4"></a>
## <small>2.0.4 (2018-02-08)</small>

* chore: release 2.0.4 ([2ab0293](https:



<a name="2.0.3"></a>
## <small>2.0.3 (2018-02-01)</small>

* chore: release 2.0.3 ([3c1abe5](https:
* fix: use process.nextTick() re: Automattic/mongoose#6074 ([e5bfe33](https:



<a name="2.0.2"></a>
## <small>2.0.2 (2018-01-24)</small>

* chore: fix license ([a9d755c](https:
* chore: release 2.0.2 ([fe87ab6](https:



<a name="2.0.1"></a>
## <small>2.0.1 (2018-01-09)</small>

* chore: release 2.0.1 with lockfile bump ([09c44fb](https:



<a name="2.0.0"></a>
## 2.0.0 (2018-01-09)

* chore: bump marked re: security ([cc564a9](https:
* chore: release 2.0.0 ([f511d1c](https:



<a name="2.0.0-rc5"></a>
## 2.0.0-rc5 (2017-12-23)

* chore: fix build on node 4+5 ([6dac5a4](https:
* chore: fix built on node 4 + 5 again ([434ef0a](https:
* chore: release 2.0.0-rc5 ([25a32ee](https:



<a name="2.0.0-rc4"></a>
## 2.0.0-rc4 (2017-12-22)

* chore: release 2.0.0-rc4 ([49fc083](https:
* BREAKING CHANGE: deduplicate when merging hooks re: Automattic/mongoose#2945 ([d458573](https:



<a name="2.0.0-rc3"></a>
## 2.0.0-rc3 (2017-12-22)

* chore: release 2.0.0-rc3 ([adaaa00](https:
* feat: support returning promises from middleware functions ([05b4480](https:



<a name="2.0.0-rc2"></a>
## 2.0.0-rc2 (2017-12-21)

* chore: release 2.0.0-rc2 ([76325fa](https:
* fix: ensure next() and done() run in next tick ([6c20684](https:



<a name="2.0.0-rc1"></a>
## 2.0.0-rc1 (2017-12-21)

* chore: improve test coverage re: Automattic/mongoose#3232 ([7b45cf0](https:
* chore: release 2.0.0-rc1 ([9b83f52](https:
* BREAKING CHANGE: report sync exceptions as errors, only allow calling next() and done() once ([674adcc](https:



<a name="2.0.0-rc0"></a>
## 2.0.0-rc0 (2017-12-17)

* chore: release 2.0.0-rc0 ([16b44b5](https:
* BREAKING CHANGE: drop support for node < 4 ([9cbb8c7](https:
* BREAKING CHANGE: remove useLegacyPost and add several new features ([6dd8531](https:



<a name="1.5.0"></a>
## 1.5.0 (2017-07-20)

* chore: release 1.5.0 ([9c491a0](https:
* fix: improve post error handlers results ([9928dd5](https:



<a name="1.4.2"></a>
## <small>1.4.2 (2017-07-06)</small>

* chore: release 1.4.2 ([8d14ac5](https:
* fix: correct args re: Automattic/mongoose#5405 ([3f28ae6](https:



<a name="1.4.1"></a>
## <small>1.4.1 (2017-04-25)</small>

* chore: release 1.4.1 ([5ecf0c2](https:
* fix: handle numAsyncPres with clone() ([c72e857](https:
* test: repro #8 ([9b4d6b2](https:



<a name="1.4.0"></a>
## 1.4.0 (2017-04-19)

* chore: release 1.4.0 ([101c5f5](https:
* feat: add merge() function ([285325e](https:



<a name="1.3.0"></a>
## 1.3.0 (2017-03-26)

* chore: release 1.3.0 ([f3a9e50](https:
* feat: pass function args to execPre ([4dd466d](https:



<a name="1.2.1"></a>
## <small>1.2.1 (2017-02-03)</small>

* chore: release 1.2.1 ([d97081f](https:
* fix: filter out _kareemIgnored args for error handlers re: Automattic/mongoose#4925 ([ddc7aeb](https:
* fix: make error handlers handle errors in pre hooks ([af38033](https:



<a name="1.2.0"></a>
## 1.2.0 (2017-01-02)

* chore: release 1.2.0 ([033225c](https:
* chore: upgrade deps ([f9e9a09](https:
* feat: add _kareemIgnore re: Automattic/mongoose#4836 ([7957771](https:



<a name="1.1.5"></a>
## <small>1.1.5 (2016-12-13)</small>

* chore: release 1.1.5 ([1a9f684](https:
* fix: correct field name ([04a0e9d](https:



<a name="1.1.4"></a>
## <small>1.1.4 (2016-12-09)</small>

* chore: release 1.1.4 ([ece401c](https:
* chore: run tests on node 6 ([e0cb1cb](https:
* fix: only copy own properties in clone() ([dfe28ce](https:



<a name="1.1.3"></a>
## <small>1.1.3 (2016-06-27)</small>

* chore: release 1.1.3 ([87171c8](https:
* fix: couple more issues with arg processing ([c65f523](https:



<a name="1.1.2"></a>
## <small>1.1.2 (2016-06-27)</small>

* chore: release 1.1.2 ([8e102b6](https:
* fix: add early return ([4feda4e](https:



<a name="1.1.1"></a>
## <small>1.1.1 (2016-06-27)</small>

* chore: release 1.1.1 ([8bb3050](https:
* fix: skip error handlers if no error ([0eb3a44](https:



<a name="1.1.0"></a>
## 1.1.0 (2016-05-11)

* chore: release 1.1.0 ([85332d9](https:
* chore: test on node 4 and node 5 ([1faefa1](https:
* 100% coverage again ([c9aee4e](https:
* add support for error post hooks ([d378113](https:
* basic setup for sync hooks #4 ([55aa081](https:
* proof of concept for error handlers ([e4a07d9](https:
* refactor out handleWrapError helper ([b19af38](https:



<a name="1.0.1"></a>
## <small>1.0.1 (2015-05-10)</small>

* Fix #1 ([de60dc6](https:
* release 1.0.1 ([6971088](https:
* Run tests on iojs in travis ([adcd201](https:
* support legacy post hook behavior in wrap() ([23fa74c](https:
* Use node 0.12 in travis ([834689d](https:



<a name="1.0.0"></a>
## 1.0.0 (2015-01-28)

* Tag 1.0.0 ([4c5a35a](https:



<a name="0.0.8"></a>
## <small>0.0.8 (2015-01-27)</small>

* Add clone function ([688bba7](https:
* Add jscs for style checking ([5c93149](https:
* Bump 0.0.8 ([03c0d2f](https:
* Fix jscs config, add gulp rules ([9989abf](https:
* fix Makefile typo ([1f7e61a](https:



<a name="0.0.7"></a>
## <small>0.0.7 (2015-01-04)</small>

* Bump 0.0.7 ([98ef173](https:
* fix LearnBoost/mongoose#2553 - use null instead of undefined for err ([9157b48](https:
* Regenerate docs ([2331cdf](https:



<a name="0.0.6"></a>
## <small>0.0.6 (2015-01-01)</small>

* Update docs and bump 0.0.6 ([92c12a7](https:



<a name="0.0.5"></a>
## <small>0.0.5 (2015-01-01)</small>

* Add coverage rule to Makefile ([825a91c](https:
* Add coveralls to README ([fb52369](https:
* Add coveralls to travis ([93f6f15](https:
* Add createWrapper() function ([ea77741](https:
* Add istanbul code coverage ([6eceeef](https:
* Add some more comments for examples ([c5b0c6f](https:
* Add travis ([e6dcb06](https:
* Add travis badge to docs ([ad8c9b3](https:
* Add wrap() tests, 100% coverage ([6945be4](https:
* Better test coverage for execPost ([d9ad539](https:
* Bump 0.0.5 ([69875b1](https:
* Docs fix ([15b7098](https:
* Fix silly mistake in docs generation ([50373eb](https:
* Fix typo in readme ([fec4925](https:
* Linkify travis badge ([92b25fe](https:
* Make travis run coverage ([747157b](https:
* Move travis status badge ([d52e89b](https:
* Quick fix for coverage ([50bbddb](https:
* Typo fix ([adea794](https:



<a name="0.0.4"></a>
## <small>0.0.4 (2014-12-13)</small>

* Bump 0.0.4, run docs generation ([51a15fe](https:
* Use correct post parameters in wrap() ([9bb5da3](https:



<a name="0.0.3"></a>
## <small>0.0.3 (2014-12-12)</small>

* Add npm test script, fix small bug with args not getting passed through post ([49e3e68](https:
* Bump 0.0.3 ([65621d8](https:
* Update readme ([901388b](https:



<a name="0.0.2"></a>
## <small>0.0.2 (2014-12-12)</small>

* Add github repo and bump 0.0.2 ([59db8be](https:



<a name="0.0.1"></a>
## <small>0.0.1 (2014-12-12)</small>

* Add basic docs ([ad29ea4](https:
* Add pre hooks ([2ffc356](https:
* Add wrap function ([68c540c](https:
* Bump to version 0.0.1 ([a4bfd68](https:
* Initial commit ([4002458](https:
* Initial deposit ([98fc489](https:
* Post hooks ([395b67c](https:
* Some basic setup work ([82df75e](https:
* Support sync pre hooks ([1cc1b9f](https:
* Update package.json description ([978da18](https:



<a name="2.2.5"></a>
## <small>2.2.5 (2018-09-24)</small>




<a name="2.2.4"></a>
## <small>2.2.4 (2018-09-24)</small>




<a name="2.2.3"></a>
## <small>2.2.3 (2018-09-24)</small>

* fix(filter): copy async pres correctly with `filter()` ([1b1ed8a](https:
* feat: add filter() function ([1f641f4](https:
* feat: support storing options on pre and post hooks ([59220b9](https:



<a name="2.2.3"></a>
## <small>2.2.3 (2018-09-10)</small>

* chore: release 2.2.3 ([af653a3](https:



<a name="2.2.2"></a>
## <small>2.2.2 (2018-09-10)</small>

* chore: release 2.2.2 ([3f0144d](https:
* fix: allow merge() to not clone ([e628d65](https:



<a name="2.2.1"></a>
## <small>2.2.1 (2018-06-05)</small>

* chore: release 2.2.1 ([4625a64](https:
* chore: remove lockfile from git ([7f3e4e6](https:
* fix: handle numAsync correctly when merging ([fef8e7e](https:
* test: repro issue with not copying numAsync ([952d9db](https:



<a name="2.2.0"></a>
## 2.2.0 (2018-06-05)

* chore: release 2.2.0 ([ff9ad03](https:
* fix: use maps instead of objects for _pres and _posts so `toString()` doesn't get reported as having ([55df303](https:



<a name="2.1.0"></a>
## 2.1.0 (2018-05-16)

* chore: release 2.1.0 ([ba5f1bc](https:
* feat: add option to check wrapped function return value for promises ([c9d7dd1](https:
* refactor: use const in wrap() ([0fc21f9](https:



<a name="2.0.7"></a>
## <small>2.0.7 (2018-04-28)</small>

* chore: release 2.0.7 ([0bf91e6](https:
* feat: add `hasHooks()` ([225f18d](https:



<a name="2.0.6"></a>
## <small>2.0.6 (2018-03-22)</small>

* chore: release 2.0.6 ([f3d406b](https:
* fix(wrap): ensure fast path still wraps function in `nextTick()` for chaining ([7000494](https:



<a name="2.0.5"></a>
## <small>2.0.5 (2018-02-22)</small>

* chore: release 2.0.5 ([3286612](https:
* perf(createWrapper): don't create wrapper if there are no hooks ([5afc5b9](https:



<a name="2.0.4"></a>
## <small>2.0.4 (2018-02-08)</small>

* chore: release 2.0.4 ([2ab0293](https:



<a name="2.0.3"></a>
## <small>2.0.3 (2018-02-01)</small>

* chore: release 2.0.3 ([3c1abe5](https:
* fix: use process.nextTick() re: Automattic/mongoose#6074 ([e5bfe33](https:



<a name="2.0.2"></a>
## <small>2.0.2 (2018-01-24)</small>

* chore: fix license ([a9d755c](https:
* chore: release 2.0.2 ([fe87ab6](https:



<a name="2.0.1"></a>
## <small>2.0.1 (2018-01-09)</small>

* chore: release 2.0.1 with lockfile bump ([09c44fb](https:



<a name="2.0.0"></a>
## 2.0.0 (2018-01-09)

* chore: bump marked re: security ([cc564a9](https:
* chore: release 2.0.0 ([f511d1c](https:



<a name="2.0.0-rc5"></a>
## 2.0.0-rc5 (2017-12-23)

* chore: fix build on node 4+5 ([6dac5a4](https:
* chore: fix built on node 4 + 5 again ([434ef0a](https:
* chore: release 2.0.0-rc5 ([25a32ee](https:



<a name="2.0.0-rc4"></a>
## 2.0.0-rc4 (2017-12-22)

* chore: release 2.0.0-rc4 ([49fc083](https:
* BREAKING CHANGE: deduplicate when merging hooks re: Automattic/mongoose#2945 ([d458573](https:



<a name="2.0.0-rc3"></a>
## 2.0.0-rc3 (2017-12-22)

* chore: release 2.0.0-rc3 ([adaaa00](https:
* feat: support returning promises from middleware functions ([05b4480](https:



<a name="2.0.0-rc2"></a>
## 2.0.0-rc2 (2017-12-21)

* chore: release 2.0.0-rc2 ([76325fa](https:
* fix: ensure next() and done() run in next tick ([6c20684](https:



<a name="2.0.0-rc1"></a>
## 2.0.0-rc1 (2017-12-21)

* chore: improve test coverage re: Automattic/mongoose#3232 ([7b45cf0](https:
* chore: release 2.0.0-rc1 ([9b83f52](https:
* BREAKING CHANGE: report sync exceptions as errors, only allow calling next() and done() once ([674adcc](https:



<a name="2.0.0-rc0"></a>
## 2.0.0-rc0 (2017-12-17)

* chore: release 2.0.0-rc0 ([16b44b5](https:
* BREAKING CHANGE: drop support for node < 4 ([9cbb8c7](https:
* BREAKING CHANGE: remove useLegacyPost and add several new features ([6dd8531](https:



<a name="1.5.0"></a>
## 1.5.0 (2017-07-20)

* chore: release 1.5.0 ([9c491a0](https:
* fix: improve post error handlers results ([9928dd5](https:



<a name="1.4.2"></a>
## <small>1.4.2 (2017-07-06)</small>

* chore: release 1.4.2 ([8d14ac5](https:
* fix: correct args re: Automattic/mongoose#5405 ([3f28ae6](https:



<a name="1.4.1"></a>
## <small>1.4.1 (2017-04-25)</small>

* chore: release 1.4.1 ([5ecf0c2](https:
* fix: handle numAsyncPres with clone() ([c72e857](https:
* test: repro #8 ([9b4d6b2](https:



<a name="1.4.0"></a>
## 1.4.0 (2017-04-19)

* chore: release 1.4.0 ([101c5f5](https:
* feat: add merge() function ([285325e](https:



<a name="1.3.0"></a>
## 1.3.0 (2017-03-26)

* chore: release 1.3.0 ([f3a9e50](https:
* feat: pass function args to execPre ([4dd466d](https:



<a name="1.2.1"></a>
## <small>1.2.1 (2017-02-03)</small>

* chore: release 1.2.1 ([d97081f](https:
* fix: filter out _kareemIgnored args for error handlers re: Automattic/mongoose#4925 ([ddc7aeb](https:
* fix: make error handlers handle errors in pre hooks ([af38033](https:



<a name="1.2.0"></a>
## 1.2.0 (2017-01-02)

* chore: release 1.2.0 ([033225c](https:
* chore: upgrade deps ([f9e9a09](https:
* feat: add _kareemIgnore re: Automattic/mongoose#4836 ([7957771](https:



<a name="1.1.5"></a>
## <small>1.1.5 (2016-12-13)</small>

* chore: release 1.1.5 ([1a9f684](https:
* fix: correct field name ([04a0e9d](https:



<a name="1.1.4"></a>
## <small>1.1.4 (2016-12-09)</small>

* chore: release 1.1.4 ([ece401c](https:
* chore: run tests on node 6 ([e0cb1cb](https:
* fix: only copy own properties in clone() ([dfe28ce](https:



<a name="1.1.3"></a>
## <small>1.1.3 (2016-06-27)</small>

* chore: release 1.1.3 ([87171c8](https:
* fix: couple more issues with arg processing ([c65f523](https:



<a name="1.1.2"></a>
## <small>1.1.2 (2016-06-27)</small>

* chore: release 1.1.2 ([8e102b6](https:
* fix: add early return ([4feda4e](https:



<a name="1.1.1"></a>
## <small>1.1.1 (2016-06-27)</small>

* chore: release 1.1.1 ([8bb3050](https:
* fix: skip error handlers if no error ([0eb3a44](https:



<a name="1.1.0"></a>
## 1.1.0 (2016-05-11)

* chore: release 1.1.0 ([85332d9](https:
* chore: test on node 4 and node 5 ([1faefa1](https:
* 100% coverage again ([c9aee4e](https:
* add support for error post hooks ([d378113](https:
* basic setup for sync hooks #4 ([55aa081](https:
* proof of concept for error handlers ([e4a07d9](https:
* refactor out handleWrapError helper ([b19af38](https:



<a name="1.0.1"></a>
## <small>1.0.1 (2015-05-10)</small>

* Fix #1 ([de60dc6](https:
* release 1.0.1 ([6971088](https:
* Run tests on iojs in travis ([adcd201](https:
* support legacy post hook behavior in wrap() ([23fa74c](https:
* Use node 0.12 in travis ([834689d](https:



<a name="1.0.0"></a>
## 1.0.0 (2015-01-28)

* Tag 1.0.0 ([4c5a35a](https:



<a name="0.0.8"></a>
## <small>0.0.8 (2015-01-27)</small>

* Add clone function ([688bba7](https:
* Add jscs for style checking ([5c93149](https:
* Bump 0.0.8 ([03c0d2f](https:
* Fix jscs config, add gulp rules ([9989abf](https:
* fix Makefile typo ([1f7e61a](https:



<a name="0.0.7"></a>
## <small>0.0.7 (2015-01-04)</small>

* Bump 0.0.7 ([98ef173](https:
* fix LearnBoost/mongoose#2553 - use null instead of undefined for err ([9157b48](https:
* Regenerate docs ([2331cdf](https:



<a name="0.0.6"></a>
## <small>0.0.6 (2015-01-01)</small>

* Update docs and bump 0.0.6 ([92c12a7](https:



<a name="0.0.5"></a>
## <small>0.0.5 (2015-01-01)</small>

* Add coverage rule to Makefile ([825a91c](https:
* Add coveralls to README ([fb52369](https:
* Add coveralls to travis ([93f6f15](https:
* Add createWrapper() function ([ea77741](https:
* Add istanbul code coverage ([6eceeef](https:
* Add some more comments for examples ([c5b0c6f](https:
* Add travis ([e6dcb06](https:
* Add travis badge to docs ([ad8c9b3](https:
* Add wrap() tests, 100% coverage ([6945be4](https:
* Better test coverage for execPost ([d9ad539](https:
* Bump 0.0.5 ([69875b1](https:
* Docs fix ([15b7098](https:
* Fix silly mistake in docs generation ([50373eb](https:
* Fix typo in readme ([fec4925](https:
* Linkify travis badge ([92b25fe](https:
* Make travis run coverage ([747157b](https:
* Move travis status badge ([d52e89b](https:
* Quick fix for coverage ([50bbddb](https:
* Typo fix ([adea794](https:



<a name="0.0.4"></a>
## <small>0.0.4 (2014-12-13)</small>

* Bump 0.0.4, run docs generation ([51a15fe](https:
* Use correct post parameters in wrap() ([9bb5da3](https:



<a name="0.0.3"></a>
## <small>0.0.3 (2014-12-12)</small>

* Add npm test script, fix small bug with args not getting passed through post ([49e3e68](https:
* Bump 0.0.3 ([65621d8](https:
* Update readme ([901388b](https:



<a name="0.0.2"></a>
## <small>0.0.2 (2014-12-12)</small>

* Add github repo and bump 0.0.2 ([59db8be](https:



<a name="0.0.1"></a>
## <small>0.0.1 (2014-12-12)</small>

* Add basic docs ([ad29ea4](https:
* Add pre hooks ([2ffc356](https:
* Add wrap function ([68c540c](https:
* Bump to version 0.0.1 ([a4bfd68](https:
* Initial commit ([4002458](https:
* Initial deposit ([98fc489](https:
* Post hooks ([395b67c](https:
* Some basic setup work ([82df75e](https:
* Support sync pre hooks ([1cc1b9f](https:
* Update package.json description ([978da18](https:
