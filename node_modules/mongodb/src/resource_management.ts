
export interface AsyncDisposable {
  
  [Symbol.asyncDispose](): Promise<void>;

  
  asyncDispose(): Promise<void>;
}


export function configureResourceManagement(target: AsyncDisposable) {
  Symbol.asyncDispose &&
    Object.defineProperty(target, Symbol.asyncDispose, {
      value: async function asyncDispose(this: AsyncDisposable) {
        await this.asyncDispose();
      },
      enumerable: false,
      configurable: true,
      writable: true
    });
}


export function configureExplicitResourceManagement() {
  
  
  
  

  
  const { MongoClient } = require('./mongo_client');
  
  const { ClientSession } = require('./sessions');
  
  const { AbstractCursor } = require('./cursor/abstract_cursor');
  
  const { ChangeStream } = require('./change_stream');

  configureResourceManagement(MongoClient.prototype);
  configureResourceManagement(ClientSession.prototype);
  configureResourceManagement(AbstractCursor.prototype);
  configureResourceManagement(ChangeStream.prototype);
}
